@model WebSiteBanHang.Models.SanPham

@{
    ViewBag.Title = "Chỉnh sửa sản phẩm";
    Layout = "~/Views/Layout/AdminLayout.cshtml";
}

@*Bước 1: sử dụng control dâetimepicker chèn 3 file script*@
<link rel="stylesheet" href="//code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
<link rel="stylesheet" href="/resources/demos/style.css">
<script src="https://code.jquery.com/jquery-3.6.0.js"></script>
<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
@*Bước 1: khi sd control editor tinymce*@
<script src="~/Content/tinymce/tinymce.min.js"></script>
<script>
    tinymce.init({
        selector: 'textarea',
        plugins: 'anchor autolink charmap codesample emoticons image link lists media searchreplace table visualblocks wordcount checklist mediaembed casechange export formatpainter pageembed linkchecker a11ychecker tinymcespellchecker permanentpen powerpaste advtable advcode editimage tinycomments tableofcontents footnotes mergetags autocorrect typography inlinecss',
        toolbar: 'undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table mergetags | addcomment showcomments | spellcheckdialog a11ycheck typography | align lineheight | checklist numlist bullist indent outdent | emoticons charmap | removeformat',
        tinycomments_mode: 'embedded',
        tinycomments_author: 'Author name',
        mergetags_list: [
            { value: 'First.Name', title: 'First Name' },
            { value: 'Email', title: 'Email' },
        ]
    });
</script>



@*Bước 2: cây dựng 1 function để điều hướng thẻ html theo dạng control datepicker*@
<script>
    $(function () {
        $("#datepicker").datepicker();
    });
</script>

<h2>Chỉnh sửa sản phẩm</h2>
@*Bước 1: Khi thêm hình ảnh*@
@using (Html.BeginForm("ChinhSua", "QuanLySanPham", FormMethod.Post, new { @enctype = "multipart/form-data" }))
{
    @Html.AntiForgeryToken()
<div class="form-horizontal">
    <h4></h4>
    <hr />
    @Html.ValidationSummary(true)
    @Html.Hidden("MaSP", Model.MaSP);


    <div class="form-group">
        @Html.LabelFor(model => model.TenSP, new { @class = "control-label col-md-2" })
        <div class="col-md-10">
            @Html.EditorFor(model => model.TenSP)
            @Html.ValidationMessageFor(model => model.TenSP)
        </div>
    </div>

    <div class="form-group">
        @Html.LabelFor(model => model.DonGia, new { @class = "control-label col-md-2" })
        <div class="col-md-10">
            @*@Html.TextBox("DonGia", Model.DonGia.Value.ToString("#,##"))*@
            @Html.EditorFor(model => model.DonGia)
            @Html.ValidationMessageFor(model => model.DonGia)
        </div>
    </div>

    <div class="form-group">
        @Html.LabelFor(model => model.GiaCu, htmlAttributes: new { @class = "control-label col-md-2" })
        <div class="col-md-2">
            @*@Html.TextBox("GiaCu", Model.GiaCu.Value.ToString("#,##"))*@
            @Html.EditorFor(model => model.GiaCu, new { htmlAttributes = new { @class = "form-control" } })
            @Html.ValidationMessageFor(model => model.GiaCu, "", new { @class = "text-danger" })
        </div>
    </div>
    @*Bước 3: đặt thêm thuộc tính class cho thẻ textbox*@
    <div class="form-group">
        @Html.LabelFor(model => model.NgayCapNhap, new { @class = "control-label col-md-2" })
        <div class="col-md-10">
            @if (Model.NgayCapNhap != null)
            {
                @Html.TextBox("NgayCapNhap", Model.NgayCapNhap.Value.ToString("dd/MM/yyyy"), new { id = "datepicker", @class = "date" })
                @Html.ValidationMessageFor(model => model.NgayCapNhap)
            }
        </div>
    </div>

    <div class="form-group">
        @Html.LabelFor(model => model.CauHinh, new { @class = "control-label col-md-2" })
        <div class="col-md-10">
            @Html.EditorFor(model => model.CauHinh)
            @Html.ValidationMessageFor(model => model.CauHinh)
        </div>
    </div>

    <div class="form-group">
        @Html.LabelFor(model => model.SoLuongTon, new { @class = "control-label col-md-2" })
        <div class="col-md-10">
            @Html.EditorFor(model => model.SoLuongTon)
            @Html.ValidationMessageFor(model => model.SoLuongTon)
        </div>
    </div>

    <div class="form-group">
        @Html.LabelFor(model => model.LuotXem, new { @class = "control-label col-md-2" })
        <div class="col-md-10">
            @Html.EditorFor(model => model.LuotXem)
            @Html.ValidationMessageFor(model => model.LuotXem)
        </div>
    </div>

    <div class="form-group">
        @Html.LabelFor(model => model.LuotBinhChon, new { @class = "control-label col-md-2" })
        <div class="col-md-10">
            @Html.EditorFor(model => model.LuotBinhChon)
            @Html.ValidationMessageFor(model => model.LuotBinhChon)
        </div>
    </div>

    <div class="form-group">
        @Html.LabelFor(model => model.LuotBinhLuan, new { @class = "control-label col-md-2" })
        <div class="col-md-10">
            @Html.EditorFor(model => model.LuotBinhLuan)
            @Html.ValidationMessageFor(model => model.LuotBinhLuan)
        </div>
    </div>

    <div class="form-group">
        @Html.LabelFor(model => model.SoLanMua, new { @class = "control-label col-md-2" })
        <div class="col-md-10">
            @Html.EditorFor(model => model.SoLanMua)
            @Html.ValidationMessageFor(model => model.SoLanMua)
        </div>
    </div>

    <div class="form-group">
        @Html.LabelFor(model => model.Moi, new { @class = "control-label col-md-2" })
        <div class="col-md-10">
            @Html.EditorFor(model => model.Moi)

        </div>
    </div>
    @*Để load đúng dữ liệu của dropdownlist thì các bạn cần truyền đúng tên (name) đúng với tên viewbag*@
    <div class="form-group">
        @Html.LabelFor(model => model.MaNCC, new { @class = "control-label col-md-2" })
        <div class="col-md-3 ">
            @Html.DropDownList("MaNCC", null, new { @class = "form-control" })

        </div>
    </div>

    <div class="form-group">
        @Html.LabelFor(model => model.MaNSX, new { @class = "control-label col-md-2" })
        <div class="col-md-3">
            @Html.DropDownList("MaNSX", null, new { @class = "form-control" })

        </div>
    </div>

    <div class="form-group">
        @Html.LabelFor(model => model.MaLoaiSP, new { @class = "control-label col-md-2" })
        <div class="col-md-3">
            @Html.DropDownList("MaLoaiSP", null, new { @class = "form-control" })
            @Html.ValidationMessageFor(model => model.MaLoaiSP)
        </div>
    </div>

    <div class="form-group">
        @Html.LabelFor(model => model.DaXoa, new { @class = "control-label col-md-2" })
        <div class="col-md-10">
            @Html.EditorFor(model => model.DaXoa)
            @Html.ValidationMessageFor(model => model.DaXoa)
        </div>
    </div>
    @*Bước 2: Tạo 1 thẻ input với type = "file"> để lưu giá trị hình ảnh*@
    <div class="form-group">
        @Html.LabelFor(model => model.HinhAnh, new { @class = "control-label col-md-2" })
        <div class="col-md-10">
            <input id="HinhAnh" name="HinhAnh" type="file" />
            <span style="color:red;">@ViewBag.upload </span>
            <br />
            <img src="@Url.Content("~/Content/HinhAnhSP/"+Model.HinhAnh)" width="150" height="180" />
        </div>
    </div>
    <div class="form-group">
        @Html.LabelFor(model => model.HinhAnh1, new { @class = "control-label col-md-2" })
        <div class="col-md-10">
            <input id="HinhAnh" name="HinhAnh" type="file" />
            @*<br />
            <img src="@Url.Content("~/Content/HinhAnhSP/"+Model.HinhAnh1)" width="150" height="180" />*@
        </div>
    </div>

    <div class="form-group">
        @Html.LabelFor(model => model.HinhAnh2, new { @class = "control-label col-md-2" })
        <div class="col-md-10">
            <input id="HinhAnh" name="HinhAnh" type="file" />
            @*<br />
            <img src="@Url.Content("~/Content/HinhAnhSP/"+Model.HinhAnh2)" width="150" height="180" />*@
        </div>
    </div>

    <div class="form-group">
        @Html.LabelFor(model => model.HinhAnh3, new { @class = "control-label col-md-2" })
        <div class="col-md-10">
            <input id="HinhAnh" name="HinhAnh" type="file" />
            @*<br />
            <img src="@Url.Content("~/Content/HinhAnhSP/"+Model.HinhAnh3)" width="150" height="180" />*@
        </div>
    </div>

    <div class="form-group">
        @Html.LabelFor(model => model.SaleNew, htmlAttributes: new { @class = "control-label col-md-2" })
        <div class="col-md-2">
            @Html.EditorFor(model => model.SaleNew, new { htmlAttributes = new { @class = "form-control" } })
            @Html.ValidationMessageFor(model => model.SaleNew, "", new { @class = "text-danger" })
        </div>
    </div>

    <div class="form-group">
        @Html.LabelFor(model => model.MoTa, new { @class = "control-label col-md-2" })
        <div class="col-md-10">
            <textarea name="MoTa" class="textarea">@Model.MoTa</textarea>
            @Html.ValidationMessageFor(model => model.MoTa)
        </div>
    </div>
    <div class="form-group">
        <div class="col-md-offset-2 col-md-10">
            <input type="submit" value="Save" class="btn btn-danger" style="font-size: 20px" />
        </div>
    </div>
</div>
}

<div>
    @Html.ActionLink("Back to List", "Index", null, new { @class = "btn btn-success", @style = "font-size: 20px;" })
</div>

<style>
    .FooterAdmin {
        display: none;
    }
</style>
